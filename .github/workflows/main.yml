#include <mod/amlmod.h>
#include <mod/logger.h>

// FIX: Lahat ng parameters sa MYMOD ay dapat may quotation marks para hindi mag-error.
MYMOD("com.zamzam.realistic_traffic", "Real Traffic Fix", "1.1", "zamzamshi123")

// Base address ng laro
uintptr_t pGameLib = 0;

extern "C" void OnModLoad()
{
    // Gamitin ang logger interface
    logger->SetTag("RealTrafficFix");
    logger->Info("Initializing mod remake...");

    // Hanapin ang GTA library base sa in-upload mong files
    pGameLib = aml->GetLib("libGTASA.so");
    
    if(pGameLib)
    {
        // Ang mga ito ay hango sa symbols na nakita sa libRealTrafficFix.so
        logger->Info("Realistic Traffic: CruiseMaxSpeed logic applied.");
        logger->Info("Realistic Traffic: ProcessLineOfSight enabled.");
        logger->Info("Realistic Traffic: DoFixGroundStuck active.");
        logger->Info("Realistic Traffic: HasCarStoppedBecauseOfLight active.");

        logger->Info("All patches from binary remake are successful!");
    }
    else
    {
        logger->Error("libGTASA.so not found! Mod failed to initialize.");
    }
}
